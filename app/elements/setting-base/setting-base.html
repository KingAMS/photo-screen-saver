<!--
  ~  Copyright (c) 2015-2017, Michael A. Updike All rights reserved.
  ~
  ~  Redistribution and use in source and binary forms, with or without
  ~  modification, are permitted provided that the following conditions are met:
  ~
  ~  Redistributions of source code must retain the above copyright notice,
  ~  this list of conditions and the following disclaimer.
  ~
  ~  Redistributions in binary form must reproduce the above copyright notice,
  ~  this list of conditions and the following disclaimer in the documentation
  ~  and/or other materials provided with the distribution.
  ~
  ~  Neither the name of the copyright holder nor the names of its contributors
  ~  may be used to endorse or promote products derived from this software
  ~  without specific prior written permission.
  ~
  ~  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  ~  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  ~  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  ~  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR
  ~  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  ~  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  ~  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
  ~  OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
  ~  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
  ~  OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
  ~  EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  -->
<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-styles/paper-styles.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../bower_components/iron-localstorage/iron-localstorage.html">

<dom-module id="setting-base">
	<template>
		<style include="shared-styles"></style>

		<div class="section-title setting-label" tabindex="-1"
			 hidden$="[[!sectionTitle]]">
			[[sectionTitle]]
		</div>
		<content></content>
		<hr hidden$="[[noseparator]]" />
		<iron-localstorage name="[[name]]" value="{{value}}"
						   on-iron-localstorage-load-empty="_init">
		</iron-localstorage>
	</template>
</dom-module>

<script>
	'use strict';
	Polymer({
		is: 'setting-base',

		hostAttributes: {
			role: 'group',
			tabIndex: -1,
		},

		properties: {
			name: {
				type: String,
				value: 'store',
			},

			value: {
				type: Object,
				value: '',
				notify: true,
			},

			defaultValue: {
				type: Object,
				value: '',
			},

			sectionTitle: {
				type: String,
				value: '',
			},

			noseparator: {
				type: Boolean,
				value: false,
			},

			disabled: {
				type: Boolean,
				value: false,
			},
		},

		/**
		 * Get the value of the item
		 * @return {Object} value - value of item
		 */
		getValue: function() {
			return this.value;
		},

		/**
		 * Set the value of the item
		 * @param {Object} value - value of item
		 */
		setValue: function(value) {
			this.value = value;
		},

		/**
		 * Initialize value if it is not in localStorage
		 * @private
		 */
		_init: function() {
			this.set('value', this.defaultValue);
		},
	});
</script>
